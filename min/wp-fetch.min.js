class WpFetch{constructor(a={},b={},c=!0){this.body=a,this.data=b,this.url="/wp-admin/admin-ajax.php?",this.init={method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}},c&&this.fetch()}check(a){return a.json().then(b=>{if(a.ok&&b.success)return b.data;const c=!1===b.success?JSON.stringify(b.data):`${a.status} (${a.statusText})`;return Promise.reject(new Error(`WpFetch ${c}`))})}fetch(){this.init.body=Object.entries(this.body).map(([a,b])=>`${encodeURIComponent(a)}=${encodeURIComponent(b)}`).join("&")+encodeURI(`&${JSON.stringify(this.data)}`),fetch(this.url,this.init).then(this.check).then(a=>!!this.success&&this.success(a)).catch(a=>this.error?this.error(a):console.error(a))}}class EventFetch extends WpFetch{constructor(a,b){super(Object.assign({},a.dataset),!1),this.element=a,a.addEventListener(b,a=>{a.preventDefault();this.handler&&!this.handler()||this.fetch()})}}